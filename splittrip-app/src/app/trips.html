<!-- Navigation / Navbar -->
<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-logo" (click)="goHome()" style="cursor: pointer;">
      <span class="logo-icon">âœˆï¸</span>
      <span class="logo-text">SplitTrip</span>
    </div>

    <!-- Navigation Links -->
    <div class="navbar-links">
      <a href="#" class="nav-link" (click)="goHome(); $event.preventDefault()">Home</a>
      <a href="#" class="nav-link" (click)="$event.preventDefault()">My Trips</a>
    </div>

    <!-- Profile Section -->
    <div class="navbar-profile">
      <div class="profile-avatar">ğŸ‘¤</div>
      <span class="profile-name">Alex Morgan</span>
      <button class="btn-signout">Sign out</button>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="trips-container">
  <div class="trips-header">
    <h1>My Trips</h1>
    <p>Manage and organize your travel plans</p>
  </div>

  <!-- Filter Tabs -->
  <div class="filter-tabs">
    @for (filter of ['All', 'Ongoing', 'Planning', 'Completed']; track filter) {
      <button 
        class="filter-btn"
        [class.active]="selectedFilter() === filter"
        (click)="setFilter(filter)">
        {{ filter }}
      </button>
    }
  </div>

  <!-- Trips Grid -->
  <div class="trips-grid">
    @for (trip of getFilteredTrips(); track trip.id) {
      <div class="trip-card">
        <div class="trip-image">{{ trip.image }}</div>
      
      <div class="trip-content">
        <div class="trip-header">
          <h3>{{ trip.title }}</h3>
          <span class="trip-status" [ngClass]="trip.status.toLowerCase()">{{ trip.status }}</span>
        </div>

        <p class="trip-destination">{{ trip.destination }}</p>
        
        <p class="trip-owner">ğŸ‘¤ Led by {{ trip.ownerName }}</p>
        
        <div class="trip-meta">
          <span>â±ï¸ {{ trip.duration }}</span>
          <span>ğŸ‘¥ {{ trip.memberCount }} member@if (trip.memberCount !== 1) {s}</span>
          <span>ğŸ’° {{ trip.budget }}</span>
        </div>

        <div class="trip-actions">
          <button class="btn btn-view" (click)="viewTrip(trip.id)">View Details</button>
          
          <!-- Owner-only buttons -->
          @if (isOwner(trip)) {
            <button class="btn btn-edit" (click)="editTrip(trip.id)">Edit</button>
            <button class="btn btn-delete" (click)="deleteTrip(trip.id)">Delete</button>
          }
          
          <!-- Member action buttons -->
          @if (!isOwner(trip) && isMember(trip)) {
            <button class="btn btn-leave" (click)="leaveTrip(trip)">Leave Trip</button>
          }
          @if (!isOwner(trip) && !isMember(trip)) {
            <button class="btn btn-join" (click)="joinTrip(trip)">Join Trip</button>
          }
        </div>
      </div>
    }
  </div>

  <!-- Empty State -->
  @if (getFilteredTrips().length === 0) {
    <div class="empty-state">
      <span class="empty-icon">ğŸ“­</span>
      <p>No {{ selectedFilter() !== 'All' ? selectedFilter().toLowerCase() : '' }} trips found</p>
      <button class="btn btn-primary" (click)="goHome()">Plan a New Trip</button>
    </div>
  }

  <!-- Currency Exchange Rates -->
  <div class="currency-widget">
    <h2>ğŸ’± USD Exchange Rates</h2>
    @if (isLoadingRates()) {
      <div class="loading-rates">Loading exchange rates...</div>
    }
    @if (!isLoadingRates() && (currencyRates() | keyvalue).length > 0) {
      <div class="rates-container">
      <div class="rate-item" *ngFor="let rate of (currencyRates() | keyvalue)">
        <div class="rate-code">{{ rate.key }}</div>
        <div class="rate-value">{{ rate.value.toFixed(2) }}</div>
      </div>
    </div>
    <p class="api-note">ğŸ“¡ Real-time rates from exchangerate.host API</p>
  </div>
</div>
